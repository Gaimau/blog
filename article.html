<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="mungaistyle.css">
    <script src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <title>Article</title>
    <style>
        .article-content { margin: 30px; padding: 20px; border: 1px solid #ccc; border-radius: 8px; }
        .tags { margin-top: 10px; }
        .tag { background: #e0e0e0; border-radius: 12px; padding: 2px 10px; margin-right: 4px; font-size: 12px; }
    </style>
</head>
<body>
    <div id="article"></div>
    <script>
        const articles = [
            { 
                title: "Example Article", 
                tags: ["Example", "Test"], 
                subtitle: "This is a test article.",
                url: "article.html?title=Example%20Article",
                mdFile: "articles/example-article.md" // Ensure this path is correct
            }
        ];

        const params = new URLSearchParams(window.location.search);
        const title = params.get('title');
        const articleDiv = document.getElementById('article');
        const article = articles.find(a => a.title === title);

        if (article) {
            document.title = article.title;
            fetch(article.mdFile)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok ' + response.statusText);
                    }
                    return response.text();
                })
                .then(md => {
                    // Convert markdown to HTML
                    const html = marked(md);
                    // Insert into page
                    articleDiv.innerHTML = `
                        <div class="article-content">
                            <h2>${article.title}</h2>
                            <p><em>${article.subtitle}</em></p>
                            <div class="full-content">${html}</div>
                        </div>
                    `;
                })
                .catch((error) => {
                    console.error('There was a problem with the fetch operation:', error);
                    articleDiv.innerHTML = "<p>Could not load article content.</p>";
                });
        } else {
            articleDiv.innerHTML = "<p>Article not found.</p>";
        }
    </script>
</body>
</html>
